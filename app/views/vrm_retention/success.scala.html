@(successViewModel: models.SuccessViewModel,
    isKeeper: Boolean)(implicit lang: Lang,
    token: uk.gov.dvla.vehicles.presentation.common.filters.CsrfPreventionAction.CsrfPreventionToken,
	config: utils.helpers.Config,
    dateService: uk.gov.dvla.vehicles.presentation.common.services.DateService)

@import controllers.routes.Success
@import views.html.vrm_retention.main
@import views.vrm_retention.Success.CreatePdfId
@import views.vrm_retention.Success.FinishId
@import views.vrm_retention.Success.PrintId


@main(
    title = Messages("vrm_retention_success.title")
) {

	<h2>@Messages("vrm_retention_success.title")</h2>
	<div class="two-col retention-success">
		<div class="second-col">

			<div class="alert-complete">
				<span class="reg-number">@successViewModel.registrationNumber</span>
				<h2>@Messages("vrm_retention_success.subtitle")</h2>
                <p>@Messages("vrm_retention_success.yourCert") <br />
					<strong>@successViewModel.retentionCertificationNumber</strong>
				</p>
			</div>

			<p>@Messages("success-cert-warning")</p>

            <div class="alert-warning"><h3>@Messages("success-cert-warning-1")</h3></div>

			@if(!isKeeper) {
            <div class="info-highlight two-col">
				<div class="second-col">
					<h3>@Messages("vrm_retention_success_payment.p6")</h3>
					<p>@Messages("vrm_retention_success_payment.p7")</p>
				</div>
				<div class="first-col">
					<a id="@CreatePdfId" class="pdf-link" href="@Success.createPdf()">
						<img src="@controllers.StaticAssets.versioned(config.assetsUrl)("images/pdf-icon-1.png")" alt="@Messages("vrm_retention_success.newPlateLink")">
						@Messages("vrm_retention_success.newPlateLink")
					</a>
				</div>
			</div>

			}

			<h2>@Messages("vrm_retention_success_payment.h2")</h2>

			<ul>
				<li>@Messages("vrm_retention_success_payment.what-next-4") <strong>@successViewModel.registrationNumber</strong> @Messages("vrm_retention_success_payment.what-next-5")
					<a href="https://www.personalisedvehicleregistration.service.gov.uk/assign/before-you-start" target="_blank">@Messages("vrm_retention_success_payment.what-next-6")</a>
					@Messages("vrm_retention_success_payment.what-next-7")</li>
				<li>@Messages("success-replacement-registration-number") <br/> <span class="reg-number">@successViewModel.replacementRegistrationNumber</span></li>

				<li>@Messages("vrm_retention_success_payment.what-next-1")</li>
				<li>@Messages("vrm_retention_success_payment.what-next-2")
					<a href="https://www.gov.uk/number-plate-supplier" target="_blank"> @Messages("vrm_retention_success_payment.what-next-3")</a></li>

				<li>@Messages("vrm_retention_success_payment.what-next-8")</li>

			</ul>

			<h2>@Messages("vrm_retention_success.p1")</h2>
			<p>@Messages("vrm_retention_success.p2") <strong>@successViewModel.replacementRegistrationNumber</strong> @Messages("vrm_retention_success.p3")</p>
			<p>@Messages("vrm_retention_success.p4")</p>
                        <div class="alert-warning"><h3>@Messages("vrm_retention_success.p5") <strong>@successViewModel.registrationNumber</strong> @Messages("vrm_retention_success.p6")</h3></div>
			<p>@Messages("vrm_retention_success.p7") <strong>@successViewModel.registrationNumber</strong> @Messages("vrm_retention_success.p8")</p>
			@if(successViewModel.businessEmail.isDefined || successViewModel.keeperEmail.isDefined) {
				<p>@Messages("vrm_retention_success_payment.what-next-9")</p>
			}

		</div>
		<div class="first-col">

            @* Keeper details *@
			<div class="related">
				<h2>@Messages("success-keeper-details")</h2>
				<dl class="playback bg-plain">
					<dt>@Messages("success-keeper-details-name")</dt>
					<dd>@successViewModel.keeperTitle @successViewModel.keeperFirstName @successViewModel.keeperLastName</dd>
					<dt>@Messages("success-keeper-details-address")</dt>
					<dt>
						@for(keeperAddressLine <- successViewModel.keeperAddress.get.address) {
							<strong>@keeperAddressLine</strong><br/>
					    }

					</dt>
				</dl>
			</div>

            @* Business details *@
            @if(!isKeeper) {
                <div class="related">
                    <h2>@Messages("success-business-details")</h2>
                    <dl class="playback bg-plain">
                        <dt>@Messages("success-business-details-name")</dt>
                        <dd>@successViewModel.businessContact</dd>
                        <dt>@Messages("success-business-details-email")</dt>
                        <dd>@successViewModel.businessEmail</dd>
                        <dt>@Messages("success-business-details-address")</dt>
                        <dt>
							<strong>@successViewModel.businessName</strong><br/>
                        @for(keeperAddressLine <- successViewModel.businessAddress.get.address) {
                            <strong>@keeperAddressLine</strong><br/>
                        }
                        </dt>
                    </dl>
                </div>
            }
		</div>
	</div>

    <div class="form-steps">
	  <div class="step">
	    <button id="@PrintId" type="button" name="action" value="Print" class="button js-only print-button">@Messages("vrm_retention_success.buttonnavprint")</button>
	    <br /><br />
        <a id="@FinishId" href="@controllers.routes.Success.finish()" class="exit">@Messages("vrm_retention_finish.button")</a>
	  </div>
    </div>

    @if(config.googleAnalyticsTrackingId.isDefined) {
        @if(!isKeeper) {
            <script type="text/javascript">
                trackClick(['@CreatePdfId', '@PrintId', '@FinishId']);
            </script>
        }

        <script type="text/javascript">
            trackClick(['@PrintId', '@FinishId']);
        </script>
    }
}
